import { isStateOperator } from './utils';
export function patch(patchObject) {
    return function patchStateOperator(existing) {
        let clone = null;
        for (const k in patchObject) {
            const newValue = patchObject[k];
            const existingPropValue = existing[k];
            const newPropValue = isStateOperator(newValue)
                ? newValue(existingPropValue)
                : newValue;
            if (newPropValue !== existingPropValue) {
                if (!clone) {
                    clone = Object.assign({}, existing);
                }
                clone[k] = newPropValue;
            }
        }
        return clone || existing;
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGF0Y2guanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9wYWNrYWdlcy9zdG9yZS9vcGVyYXRvcnMvc3JjL3BhdGNoLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxTQUFTLENBQUM7QUFNMUMsTUFBTSxVQUFVLEtBQUssQ0FDbkIsV0FBbUM7SUFFbkMsT0FBTyxTQUFTLGtCQUFrQixDQUFDLFFBQTBCO1FBQzNELElBQUksS0FBSyxHQUFHLElBQUksQ0FBQztRQUNqQixLQUFLLE1BQU0sQ0FBQyxJQUFJLFdBQVcsRUFBRTtZQUMzQixNQUFNLFFBQVEsR0FBRyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDaEMsTUFBTSxpQkFBaUIsR0FBRyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDdEMsTUFBTSxZQUFZLEdBQUcsZUFBZSxDQUFDLFFBQVEsQ0FBQztnQkFDNUMsQ0FBQyxDQUFDLFFBQVEsQ0FBTSxpQkFBaUIsQ0FBQztnQkFDbEMsQ0FBQyxDQUFDLFFBQVEsQ0FBQztZQUNiLElBQUksWUFBWSxLQUFLLGlCQUFpQixFQUFFO2dCQUN0QyxJQUFJLENBQUMsS0FBSyxFQUFFO29CQUNWLEtBQUsscUJBQWMsUUFBUyxDQUFFLENBQUM7aUJBQ2hDO2dCQUNELEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxZQUFZLENBQUM7YUFDekI7U0FDRjtRQUNELE9BQU8sS0FBSyxJQUFJLFFBQVEsQ0FBQztJQUMzQixDQUFDLENBQUM7QUFDSixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRXhpc3RpbmdTdGF0ZSwgTm9JbmZlciwgU3RhdGVPcGVyYXRvciB9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHsgaXNTdGF0ZU9wZXJhdG9yIH0gZnJvbSAnLi91dGlscyc7XG5cbnR5cGUgTm90VW5kZWZpbmVkPFQ+ID0gVCBleHRlbmRzIHVuZGVmaW5lZCA/IG5ldmVyIDogVDtcblxuZXhwb3J0IHR5cGUgybVQYXRjaFNwZWM8VD4gPSB7IFtQIGluIGtleW9mIFRdPzogVFtQXSB8IFN0YXRlT3BlcmF0b3I8Tm90VW5kZWZpbmVkPFRbUF0+PiB9O1xuXG5leHBvcnQgZnVuY3Rpb24gcGF0Y2g8VCBleHRlbmRzIFJlY29yZDxzdHJpbmcsIGFueT4+KFxuICBwYXRjaE9iamVjdDogTm9JbmZlcjzJtVBhdGNoU3BlYzxUPj5cbik6IFN0YXRlT3BlcmF0b3I8VD4ge1xuICByZXR1cm4gZnVuY3Rpb24gcGF0Y2hTdGF0ZU9wZXJhdG9yKGV4aXN0aW5nOiBFeGlzdGluZ1N0YXRlPFQ+KTogVCB7XG4gICAgbGV0IGNsb25lID0gbnVsbDtcbiAgICBmb3IgKGNvbnN0IGsgaW4gcGF0Y2hPYmplY3QpIHtcbiAgICAgIGNvbnN0IG5ld1ZhbHVlID0gcGF0Y2hPYmplY3Rba107XG4gICAgICBjb25zdCBleGlzdGluZ1Byb3BWYWx1ZSA9IGV4aXN0aW5nW2tdO1xuICAgICAgY29uc3QgbmV3UHJvcFZhbHVlID0gaXNTdGF0ZU9wZXJhdG9yKG5ld1ZhbHVlKVxuICAgICAgICA/IG5ld1ZhbHVlKDxhbnk+ZXhpc3RpbmdQcm9wVmFsdWUpXG4gICAgICAgIDogbmV3VmFsdWU7XG4gICAgICBpZiAobmV3UHJvcFZhbHVlICE9PSBleGlzdGluZ1Byb3BWYWx1ZSkge1xuICAgICAgICBpZiAoIWNsb25lKSB7XG4gICAgICAgICAgY2xvbmUgPSB7IC4uLig8YW55PmV4aXN0aW5nKSB9O1xuICAgICAgICB9XG4gICAgICAgIGNsb25lW2tdID0gbmV3UHJvcFZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY2xvbmUgfHwgZXhpc3Rpbmc7XG4gIH07XG59XG4iXX0=